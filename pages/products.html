<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ÿßŸÑŸÖŸÜÿ™ÿ¨ÿßÿ™ - BODA</title>
    <link rel="stylesheet" href="../assets/css/style.css">
    <link rel="stylesheet" href="../assets/vendor/fontawesome/css/all.min.css" crossorigin="anonymous" referrerpolicy="no-referrer">
    <link href="../assets/fonts/inter.css" rel="stylesheet"/>
    <link href="../assets/fonts/material-icons-outlined.css" rel="stylesheet"/>
    <script src="../assets/vendor/tailwind/tailwind-forms-typography.js"></script>
    <link href="../assets/css/home.css" rel="stylesheet"/>
    <style>
        .products-page {
            max-width: 1400px;
            margin: 0 auto;
            padding: 1.5rem 1rem;
        }

        .products-header {
            text-align: center;
            margin-bottom: 2rem;
        }

        .products-title {
            font-family: 'Orbitron', monospace;
            color: #9f5f1d;
            text-shadow: 0 0 15px rgba(1, 4, 4, 0.5);
            margin-bottom: 1rem;
            font-size: 1.8rem;
        }

        .products-subtitle {
            color: #ffffff;
            font-size: 0.95rem;
            max-width: 600px;
            margin: 0 auto;
        }

        .filters-section {
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(15px);
            padding: 1.5rem;
            border-radius: 15px;
            border: 1px solid rgba(0, 212, 255, 0.2);
            margin-bottom: 2rem;
            display: flex;
            flex-direction: column;
            gap: 1rem;
            align-items: stretch;
        }

        .filter-group {
            color: #00d4ff;
            font-weight: bold;
            font-size: 0.95rem;
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
        }

        .filter-label {
            color: #00d4ff;
            font-weight: bold;
            font-size: 0.9rem;
        }

        .filter-select, .search-input {
            padding: 0.8rem 1rem;
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 8px;
            color: #e0e0e0;
            font-family: 'Roboto', sans-serif;
            outline: none;
            transition: all 0.3s ease;
            width: 100%;
            box-sizing: border-box;
            font-size: 0.95rem;
        }

        .filter-select:focus, .search-input:focus {
            border-color: #00d4ff;
            box-shadow: 0 0 10px rgba(0, 212, 255, 0.3);
        }

        .products-stats {
            display: flex;
            flex-direction: column;
            gap: 1rem;
            margin-bottom: 2rem;
            padding: 1rem;
            border-radius: 12px;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .stats-text {
            color: #ffffff;
            font-size: 0.9rem;
            text-align: center;
        }

        .view-toggle {
            display: flex;
            gap: 0.5rem;
            justify-content: center;
        }

        .view-btn {
            padding: 0.6rem 1rem;
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 0.85rem;
            background: rgba(255, 255, 255, 0.05);
            color: #e0e0e0;
        }

        .view-btn.active {
            background: linear-gradient(135deg, #f7f7f763, #090979);
            color: white;
            border-color: #efefef;
        }

        .products-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
            gap: 1rem;
        }

        .products-list {
            display: none;
            flex-direction: column;
            gap: 1rem;
        }

        .product-card {
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(15px);
            border-radius: 15px;
            border: 1px solid rgba(0, 212, 255, 0.2);
            overflow: hidden;
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .product-card:hover {
            background: rgba(255, 255, 255, 0.08);
            box-shadow: 0 10px 30px rgba(0, 212, 255, 0.2);
            border-color: rgba(0, 212, 255, 0.4);
            transform: translateY(-5px);
        }

        /* Responsive Design */
        @media (min-width: 640px) {
            .products-page {
                padding: 2rem;
            }

            .products-title {
                font-size: 2.2rem;
            }

            .products-grid {
                grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
                gap: 1.5rem;
            }

            .filters-section {
                flex-direction: row;
                gap: 1.5rem;
                align-items: center;
            }

            .filter-group {
                flex-direction: row;
                align-items: center;
                gap: 0.5rem;
                flex: 1;
            }

            .filter-select, .search-input {
                width: auto;
                min-width: 150px;
            }

            .search-input {
                min-width: 250px;
            }

            .products-stats {
                flex-direction: row;
                justify-content: space-between;
            }
        }

        @media (min-width: 1024px) {
            .products-page {
                padding: 2rem;
            }

            .products-title {
                font-size: 2.5rem;
            }

            .products-grid {
                grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
                gap: 2rem;
            }

            .search-input {
                min-width: 300px;
            }
        }

        .product-image {
            width: 100%;
            height: 250px;
            background: linear-gradient(135deg, rgba(0, 212, 255, 0.1), rgba(9, 9, 121, 0.1));
            display: flex;
            align-items: center;
            justify-content: center;
            overflow: hidden;
            position: relative;
        }

        .product-image img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .product-badge {
            position: absolute;
            top: 10px;
            right: 10px;
            background: linear-gradient(135deg, #ff6b35, #f7931e);
            color: white;
            padding: 0.3rem 0.8rem;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: bold;
        }

        .product-info {
            padding: 1.5rem;
        }

        .product-name {
            color: #ffffff;
            font-size: 1.1rem;
            font-weight: bold;
            margin-bottom: 0.5rem;
            display: -webkit-box;
            -webkit-line-clamp: 2;
            line-clamp: 2;
            -webkit-box-orient: vertical;
            overflow: hidden;
        }

        .product-price {
            color: #00d4ff;
            font-size: 1.3rem;
            font-weight: bold;
            margin-bottom: 0.5rem;
        }

        .product-rating {
            color: #ffc107;
            font-size: 0.9rem;
            margin-bottom: 1rem;
        }

        .product-actions {
            display: flex;
            gap: 0.5rem;
        }

        .product-actions button {
            flex: 1;
            padding: 0.8rem;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s ease;
            font-size: 0.9rem;
        }

        .btn-cart {
            background: linear-gradient(135deg, #00d4ff, #00a8cc);
            color: white;
        }

        .btn-cart:hover {
            box-shadow: 0 8px 32px rgba(0, 212, 255, 0.3);
            transform: translateY(-2px);
        }

        .btn-wishlist {
            background: rgba(255, 107, 107, 0.2);
            color: #ff6b6b;
            border: 1px solid rgba(255, 107, 107, 0.4);
        }

        .btn-wishlist:hover {
            background: rgba(255, 107, 107, 0.4);
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(255, 107, 107, 0.3);
        }

        .product-list-item {
            display: flex;
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(15px);
            border-radius: 15px;
            border: 1px solid rgba(0, 212, 255, 0.2);
            overflow: hidden;
            transition: all 0.3s ease;
        }

        .product-list-item:hover {
            background: rgba(255, 255, 255, 0.08);
            border-color: rgba(0, 212, 255, 0.4);
        }

        .list-image {
            width: 150px;
            height: 150px;
            background: linear-gradient(135deg, rgba(0, 212, 255, 0.1), rgba(9, 9, 121, 0.1));
            display: flex;
            align-items: center;
            justify-content: center;
            overflow: hidden;
        }

        .list-image img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .list-content {
            flex: 1;
            padding: 1.5rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .list-info {
            flex: 1;
        }

        .list-name {
            color: #ffffff;
            font-size: 1.2rem;
            font-weight: bold;
            margin-bottom: 0.5rem;
        }

        .list-price {
            color: #00d4ff;
            font-size: 1.4rem;
            font-weight: bold;
            margin-bottom: 0.5rem;
        }

        .list-rating {
            color: #ffc107;
            font-size: 0.9rem;
        }

        .list-actions {
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
            min-width: 200px;
        }

        .list-actions button {
            padding: 0.8rem 1.2rem;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s ease;
            font-size: 0.9rem;
        }

        .no-results {
            grid-column: 1/-1;
            text-align: center;
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(15px);
            border-radius: 20px;
        }

        .no-results-icon {
            font-size: 40px;
            margin-bottom: 1.5rem;
        }

        .no-results-text {
            color: #b0b0b0;
            font-size: 1.2rem;
            margin-bottom: 2rem;
        }

        .no-results-btn {
        background: linear-gradient(135deg, #774317, #bdbdcd);
            color: white;
            border: none;
            padding: 1rem 2rem;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .no-results-btn:hover {
            box-shadow: 0 8px 32px rgba(0, 212, 255, 0.3);
            transform: translateY(-2px);
        }

        /* Sold Out Styling */
        .product-card.is-out-of-stock {
            opacity: 0.7;
            filter: grayscale(0.5);
            pointer-events: none;
        }

        .out-of-stock-overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.6);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
            font-size: 1.2rem;
            z-index: 10;
        }

        .product-badge.discount {
            background: linear-gradient(135deg, #ff4d4d, #ff0000);
        }

        .price-container {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 0.5rem;
        }

        .product-price.old {
            text-decoration: line-through;
            color: #888;
            font-size: 1rem;
        }

        @media (max-width: 768px) {
            .filters-section {
                flex-direction: column;
                align-items: stretch;
            }

            .search-input {
                min-width: auto;
                width: 100%;
            }

            .products-grid {
                grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
                gap: 1rem;
            }

            .product-list-item {
                flex-direction: column;
            }

            .list-image {
                width: 100%;
                height: 200px;
            }

            .list-content {
                flex-direction: column;
                gap: 1rem;
            }

            .list-actions {
                flex-direction: row;
                min-width: auto;
            }
        }
        /* Denser layout for very small phones */
        @media (max-width: 420px) {
            .products-page {
                padding: 0.6rem;
            }

            .products-title {
                font-size: 1.2rem;
            }

            .products-subtitle {
                font-size: 0.85rem;
                max-width: none;
            }

            .products-grid {
                grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
                gap: 0.6rem;
            }

            .product-card {
                border-radius: 10px;
            }

            .product-image {
                height: 140px;
            }

            .product-info {
                padding: 0.8rem;
            }

            .product-name {
                font-size: 0.95rem;
                -webkit-line-clamp: 2;
            }

            .product-price {
                font-size: 1rem;
            }

            .product-actions button {
                padding: 0.6rem;
                font-size: 0.8rem;
            }

            .product-list-item .list-image {
                height: 120px;
            }

            .list-name {
                font-size: 1rem;
            }

            .list-actions {
                min-width: 140px;
            }

            .filters-section {
                padding: 0.8rem;
                gap: 0.5rem;
            }

            .filter-select, .search-input {
                padding: 0.6rem;
                font-size: 0.85rem;
            }
        }
        .my-1 {
                    text-decoration: none;
    color: #e0e0e0;
    font-weight: 500;
    margin-left: 2rem;
    transition: all 0.3s ease;
    position: relative;
    display: flex;
    align-items: center;
    gap: 0.5rem;
    border-radius: 20px;
    background: rgba(255, 255, 255, 0.05);
    backdrop-filter: blur(5px);
        }
        .mt {
            background: linear-gradient(135deg, #ffffff, #3f2f0c,#ffffff,  #ffffff);
        }
    </style>
</head>
<body class="mt">

    <header class="sticky top-0 z-50 bg-surface-light dark:bg-surface-dark shadow-sm">
    <div class="px-4 py-3 flex items-center justify-between gap-3">
    <a class="p-2 text-slate-500 dark:text-slate-400 hover:text-primary dark:hover:text-primary transition-colors" href="wishlist.html">
    <span class="material-icons-outlined text-2xl">favorite_border</span>
    </a>
    <div class="flex-1 relative">
    <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
    <span class="material-icons-outlined text-slate-400 text-xl">search</span>
    </div>
    <input class="block w-full pl-10 pr-3 py-2 border border-slate-200 dark:border-slate-600 rounded-lg bg-slate-50 dark:bg-slate-800 text-sm placeholder-slate-400 focus:outline-none focus:border-secondary dark:focus:border-primary focus:ring-1 focus:ring-secondary dark:focus:ring-primary transition-colors" id="home-search" placeholder="What are you looking for?" type="text"/>
    </div>
    <div class="flex items-center gap-2">
    <div class="text-secondary dark:text-white font-black text-2xl tracking-tighter flex items-center">
    <span class="text-primary mr-1">
    <span class="material-icons-outlined align-middle text-2xl">shopping_bag</span>
    </span>
                    BODA
                </div>

    </div>
    </div>
    </header>

    <main class="products-page">
        <div class="products-header">
            <h1 class="products-title">ÿßŸÑŸÖŸÜÿ™ÿ¨ÿßÿ™</h1>
            <p class="products-subtitle">ÿßŸÉÿ™ÿ¥ŸÅ ŸÖÿ¨ŸÖŸàÿπÿ™ŸÜÿß ÿßŸÑŸàÿßÿ≥ÿπÿ© ŸÖŸÜ ÿßŸÑŸÖŸÜÿ™ÿ¨ÿßÿ™ ÿπÿßŸÑŸäÿ© ÿßŸÑÿ¨ŸàÿØÿ© ÿ®ÿ£ÿ≥ÿπÿßÿ± ÿ™ŸÜÿßŸÅÿ≥Ÿäÿ©</p>
        </div>


        <!-- Products Stats -->
        <div class="products-stats">
            <div class="stats-text" id="productsStats">ÿπÿ±ÿ∂ 0 ŸÖŸÜÿ™ÿ¨ ŸÖŸÜ ÿ£ÿµŸÑ 0</div>
            <div class="view-toggle">
                <button class="view-btn active" id="gridView">üì±ÿ¥ÿ®ŸÉÿ©</button>
                <button class="view-btn" id="listView">ŸÇÿßÿ¶ŸÖÿ©</button>
            </div>
        </div>

        <!-- Products Grid -->
        <div class="products-container">
            <div class="products-grid" id="productsGrid">
                <!-- Products will be loaded here -->
            </div>

            <div class="products-list" id="productsList">
                <!-- List view will be loaded here -->
            </div>
        </div>
    </main>

    <script src="../assets/js/mock-api.js"></script>
    <script src="../assets/js/store.js"></script>
    <script src="../assets/js/script.js"></script>
    <script>

        let allProducts = [];
        let filteredProducts = [];
        let currentView = 'grid';

        // Initialize page
        document.addEventListener('DOMContentLoaded', function() {
            console.log('Products page loading...');
            
            // Wait a bit for script.js to load
            setTimeout(() => {
                try {
                    // Load all products using the unified function from script.js
                    if (typeof getAllProducts === 'function') {
                        const productsObj = getAllProducts();
                        allProducts = Object.values(productsObj);
                        console.log('Loaded products:', allProducts.length);
                    } else {
                        console.warn('getAllProducts function not found');
                        allProducts = [];
                    }
                    
                    filteredProducts = [...allProducts];
                    
                    updateCartCount();
                    displayProducts();
                    setupEventListeners();
                    
                    // Handle category and search from URL
                    const urlParams = new URLSearchParams(window.location.search);
                    const category = urlParams.get('category');
                    const search = urlParams.get('search');
                    
                    if (category) {
                        document.getElementById('categoryFilter').value = category;
                    }
                    if (search) {
                        document.getElementById('searchInput').value = search;
                    }
                    if (category || search) {
                        filterProducts();
                    }
                } catch (error) {
                    console.error('Error initializing products:', error);
                    displayProducts(); // Show empty state
                }
            }, 100);
        });

        function setupEventListeners() {
            // Search functionality
            const searchInput = document.getElementById('searchInput');
            if (searchInput) {
                searchInput.addEventListener('input', filterProducts);
            }

            // Category filter
            const categoryFilter = document.getElementById('categoryFilter');
            if (categoryFilter) {
                categoryFilter.addEventListener('change', filterProducts);
            }

            // Sort filter
            const sortFilter = document.getElementById('sortFilter');
            if (sortFilter) {
                sortFilter.addEventListener('change', sortProducts);
            }

            // View toggle
            const gridView = document.getElementById('gridView');
            const listView = document.getElementById('listView');
            if (gridView) gridView.addEventListener('click', () => switchView('grid'));
            if (listView) listView.addEventListener('click', () => switchView('list'));
        }

        function filterProducts() {
            const searchInput = document.getElementById('searchInput');
            const categoryFilter = document.getElementById('categoryFilter');
            
            const searchTerm = searchInput ? searchInput.value.toLowerCase() : '';
            const categoryValue = categoryFilter ? categoryFilter.value : '';

            filteredProducts = allProducts.filter(product => {
                const matchesSearch = product.name.toLowerCase().includes(searchTerm);
                const matchesCategory = !categoryValue || product.category === categoryValue;
                return matchesSearch && matchesCategory;
            });

            sortProducts();
            displayProducts();
        }

        function sortProducts() {
            const sortFilter = document.getElementById('sortFilter');
            const sortBy = sortFilter ? sortFilter.value : 'name';

            filteredProducts.sort((a, b) => {
                const aPrice = a.discountPrice || a.price;
                const bPrice = b.discountPrice || b.price;

                switch(sortBy) {
                    case 'name':
                        return a.name.localeCompare(b.name);
                    case 'name-desc':
                        return b.name.localeCompare(a.name);
                    case 'price-low':
                        return aPrice - bPrice;
                    case 'price-high':
                        return bPrice - aPrice;
                    case 'rating':
                        return b.rating - a.rating;
                    case 'newest':
                        return (b.id || '').localeCompare(a.id || ''); 
                    default:
                        return 0;
                }
            });

            displayProducts();
        }

        function switchView(view) {
            currentView = view;

            // Update button states
            const gridView = document.getElementById('gridView');
            const listView = document.getElementById('listView');
            if (gridView) gridView.classList.toggle('active', view === 'grid');
            if (listView) listView.classList.toggle('active', view === 'list');

            // Show/hide containers
            const productsGrid = document.getElementById('productsGrid');
            const productsList = document.getElementById('productsList');
            if (productsGrid) productsGrid.style.display = view === 'grid' ? 'grid' : 'none';
            if (productsList) productsList.style.display = view === 'list' ? 'flex' : 'none';

            displayProducts();
        }

        function displayProducts() {
            const gridContainer = document.getElementById('productsGrid');
            const listContainer = document.getElementById('productsList');
            const statsEl = document.getElementById('productsStats');

            // Update stats
            if (statsEl) {
                statsEl.textContent = `ÿπÿ±ÿ∂ ${filteredProducts.length} ŸÖŸÜÿ™ÿ¨ ŸÖŸÜ ÿ£ÿµŸÑ ${allProducts.length}`;
            }

            if (filteredProducts.length === 0) {
                const noResultsHtml = `
                    <div class="no-results">
                        <div class="no-results-icon">üîç</div>
                        <div class="no-results-text">ŸÑŸÖ Ÿäÿ™ŸÖ ÿßŸÑÿπÿ´Ÿàÿ± ÿπŸÑŸâ ŸÖŸÜÿ™ÿ¨ÿßÿ™ ÿ™ÿ∑ÿßÿ®ŸÇ ÿ®ÿ≠ÿ´ŸÉ</div>
                        <button class="no-results-btn" onclick="clearFilters()">ŸÖÿ≥ÿ≠ ÿßŸÑŸÖÿ±ÿ¥ÿ≠ÿßÿ™</button>
                    </div>
                `;
                if (gridContainer) gridContainer.innerHTML = noResultsHtml;
                if (listContainer) listContainer.innerHTML = '';
                return;
            }

            // Grid view
            if (gridContainer) {
                gridContainer.innerHTML = filteredProducts.map(product => {
                    const isOutOfStock = product.stockStatus === 'out_of_stock';
                    const hasDiscount = product.discountPrice && product.discountPrice < product.price;
                    const discountPercent = hasDiscount ? Math.round(((product.price - product.discountPrice) / product.price) * 100) : 0;

                    return `
                    <div class="product-card ${isOutOfStock ? 'is-out-of-stock' : ''}" onclick="!${isOutOfStock} && viewProduct('${product.id}')">
                        <div class="product-image">
                            <img src="${getImagePath(product.image)}" alt="${product.name}" loading="lazy" onerror="this.src='/assets/images/placeholder.jpg'">
                            ${isOutOfStock ? '<div class="out-of-stock-overlay">ŸÜŸÅÿ∞ÿ™ ÿßŸÑŸÉŸÖŸäÿ©</div>' : ''}
                            ${hasDiscount ? `<div class="product-badge discount">ÿÆÿµŸÖ ${discountPercent}%</div>` : (product.badge ? `<div class="product-badge">${product.badge}</div>` : '')}
                        </div>
                        <div class="product-info">
                            <div class="product-name">${product.name}</div>
                            <div class="price-container">
                                ${hasDiscount ? `
                                    <div class="product-price old">${product.price} ÿ¨.ŸÖ</div>
                                    <div class="product-price">${product.discountPrice} ÿ¨.ŸÖ</div>
                                ` : `
                                    <div class="product-price">${product.price} ÿ¨.ŸÖ</div>
                                `}
                            </div>
                            ${product.rating > 0 ? `
                            <div class="product-rating">
                                ${renderStars(product.rating)}
                                <span style="color: #b0b0b0;">(${product.rating})</span>
                            </div>
                            ` : ''}
                            <div class="product-actions">
                                <button class="btn-cart" ${isOutOfStock ? 'disabled' : ''} onclick="event.stopPropagation(); addToCart(${JSON.stringify(product).replace(/"/g, '&quot;')})">
                                    ${isOutOfStock ? 'ÿ∫Ÿäÿ± ŸÖÿ™ŸàŸÅÿ±' : 'ÿ£ÿ∂ŸÅ ÿ•ŸÑŸâ ÿßŸÑÿπÿ±ÿ®ÿ©'}
                                </button>
                                <button class="btn-wishlist" onclick="event.stopPropagation(); toggleWishlist('${product.id}')">
                                    ‚ù§Ô∏è
                                </button>
                            </div>
                        </div>
                    </div>
                `;}).join('');
            }

            // List view
            if (listContainer) {
                listContainer.innerHTML = filteredProducts.map(product => {
                    const isOutOfStock = product.stockStatus === 'out_of_stock';
                    const hasDiscount = product.discountPrice && product.discountPrice < product.price;

                    return `
                    <div class="product-list-item ${isOutOfStock ? 'is-out-of-stock' : ''}" onclick="!${isOutOfStock} && viewProduct('${product.id}')">
                        <div class="list-image">
                            <img src="${getImagePath(product.image)}" alt="${product.name}" loading="lazy" onerror="this.src='/assets/images/placeholder.jpg'">
                            ${isOutOfStock ? '<div class="out-of-stock-overlay">ŸÜŸÅÿ∞ÿ™ ÿßŸÑŸÉŸÖŸäÿ©</div>' : ''}
                        </div>
                        <div class="list-content">
                            <div class="list-info">
                                <div class="list-name">${product.name}</div>
                                <div class="price-container">
                                    ${hasDiscount ? `
                                        <div class="product-price old">${product.price} ÿ¨.ŸÖ</div>
                                        <div class="product-price">${product.discountPrice} ÿ¨.ŸÖ</div>
                                    ` : `
                                        <div class="product-price">${product.price} ÿ¨.ŸÖ</div>
                                    `}
                                </div>
                                ${product.rating > 0 ? `
                                <div class="list-rating">
                                    ${renderStars(product.rating)}
                                    <span style="color: #b0b0b0;">(${product.rating}) ‚Ä¢ ${product.reviewCount || 0} ÿ™ŸÇŸäŸäŸÖ</span>
                                </div>
                                ` : ''}
                            </div>
                            <div class="list-actions">
                                <button class="btn-cart" ${isOutOfStock ? 'disabled' : ''} onclick="event.stopPropagation(); addToCart(${JSON.stringify(product).replace(/"/g, '&quot;')})">
                                    ${isOutOfStock ? 'ÿ∫Ÿäÿ± ŸÖÿ™ŸàŸÅÿ±' : 'ÿ£ÿ∂ŸÅ ÿ•ŸÑŸâ ÿßŸÑÿπÿ±ÿ®ÿ©'}
                                </button>
                                <button class="btn-wishlist" onclick="event.stopPropagation(); toggleWishlist('${product.id}')">
                                    ‚ù§Ô∏è ÿßŸÑŸÖŸÅÿ∂ŸÑÿ©
                                </button>
                            </div>
                        </div>
                    </div>
                `;}).join('');
            }
        }

        function clearFilters() {
            const searchInput = document.getElementById('searchInput');
            const categoryFilter = document.getElementById('categoryFilter');
            const sortFilter = document.getElementById('sortFilter');
            
            if (searchInput) searchInput.value = '';
            if (categoryFilter) categoryFilter.value = '';
            if (sortFilter) sortFilter.value = 'name';
            
            filteredProducts = [...allProducts];
            displayProducts();
        }

        // Use relative paths for assets in subdirectories
        // Overwrite baseURL if needed or handle in api-integration.js
    </script>
</body>
</html>